<html>
<body>
  <h1>Some text</h1>

<textarea id="textThing" rows="25" cols="50">
  <h2>delivered content :)</h2>
</textarea>

  <input type="button" onclick="sendInput()" value="send"/>
  <input type="button" onclick="ingestFile()" value="open"/>
</body>
<script>
const { remote, ipcRenderer } = require ('electron');
const {dialog, app} = require('electron').remote;
const fs = require('fs-extra');



function ingestFile(){
  dialog.showOpenDialog((filePaths) => {
    // fileNames is an array that contains all the selected
    if(filePaths === undefined){
        console.log("No file selected");
        return;
    }

    fs.copy(filePaths[0], app.getAppPath() + '/assets/' + filePaths[0].split('\\').pop().split('/').pop())
    .then(() => console.log('success!'))
    .catch(err => console.error(err))
});
}



function sendInput(){
  let message = {
    'target_window': 'overlay1',
    'builder': 'text_slide',
    'content': document.getElementById('textThing').value
  }
  send(message);
}


function send(message){
  let target = remote.getGlobal('windows')[message.target_window];
  if (target) target.webContents.send('message', message);
}

</script>
</html>
